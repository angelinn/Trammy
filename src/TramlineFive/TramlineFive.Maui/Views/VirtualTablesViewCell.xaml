<?xml version="1.0" encoding="UTF-8"?>
<Border xmlns="http://schemas.microsoft.com/dotnet/2021/maui" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TramlineFive.Maui.Views.VirtualTablesViewCell"
             xmlns:cv="clr-namespace:TramlineFive.Converters"
             BackgroundColor="Transparent"
             Margin="0,0,0,5">

    <Border.StrokeShape>
        <RoundRectangle CornerRadius="20" />
    </Border.StrokeShape>
    <Border.Resources>
            <ResourceDictionary>
                <cv:TransportTypeToColorConverter x:Key="TransportToColor" />
            <cv:InverseBoolConverter x:Key="InverseBool" />
        </ResourceDictionary>
        </Border.Resources>

        <Grid Padding="5" BackgroundColor="{Binding VehicleType, Converter={StaticResource TransportToColor}}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="100" />
        </Grid.ColumnDefinitions>

        <StackLayout Padding="10,0,0,0" Spacing="0" HorizontalOptions="Start">
                <Label Text="{Binding LineName}" TextColor="White" FontSize="40" Margin="0,0,0,0" />
                <StackLayout Orientation="Horizontal">
                    <Label FontFamily="MaterialIconsOutlinedRegular.otf" Text="&#xe52e;" FontSize="21" Margin="0,0,5,0" TextColor="White" />
                    <Label Text="{Binding Direction}" TextColor="White" Margin="0,0,0,0" />
                </StackLayout>

                <StackLayout Orientation="Horizontal">
                    <Label Text="Следващи: " TextColor="White" />

                <CollectionView ItemsSource="{Binding ArrivalsSkipFirst}" ItemsLayout="HorizontalList">
                        <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <HorizontalStackLayout Spacing="0">
                                <Label FontFamily="MaterialIconsOutlinedRegular.otf" FontSize="21" Margin="0,0,0,0" TextColor="White">
                                    <Label.Triggers>
                                        <DataTrigger TargetType="Label" Binding="{Binding Realtime}" Value="True">
                                            <Setter Property="Text" Value="&#xe51e;" />
                                        </DataTrigger>
                                        <DataTrigger TargetType="Label" Binding="{Binding Realtime}" Value="False">
                                            <Setter Property="Text" Value="&#xE8B5;" />
                                        </DataTrigger>
                                    </Label.Triggers>
                                </Label>
                                
                                <Label Text="{Binding MinutesTillArrival, StringFormat=' {0} мин'}" TextColor="White" Margin="0,0,5,0" />
                            </HorizontalStackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                    </CollectionView>
            </StackLayout>
            </StackLayout>
            <StackLayout Grid.Column="1" VerticalOptions="Center" Spacing="0">
            <Label FontFamily="MaterialIconsOutlinedRegular.otf" FontSize="21" Margin="65,0,0,10" HorizontalOptions="Center" TextColor="White">
                <Label.Triggers>
                    <DataTrigger TargetType="Label" Binding="{Binding Realtime}" Value="True">
                        <Setter Property="Text" Value="&#xe51e;" />
                    </DataTrigger>
                    <DataTrigger TargetType="Label" Binding="{Binding Realtime}" Value="False">
                        <Setter Property="Text" Value="&#xE8B5;" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>
            <StackLayout Margin="0,-30,0,0">
                <Label Text="{Binding MinutesTillArrival}" FontSize="40" HorizontalOptions="Center" TextColor="White" />
                <Label Text="минути" TextColor="White" HorizontalOptions="Center"  />
            </StackLayout>
        </StackLayout>
        </Grid>
    </Border>
    